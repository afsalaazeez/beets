# Test generated by RoostGPT for test beet-box using AI Type Open AI and AI Model gpt-4


# RoostTestHash=0377fbf6fd

config:
  target: "{{ $processEnvironment.API_HOST }}"
  plugins:
    expect: {}
  payload:
    path: "countries_get_others.csv"
    fields:
      - "countryName"
    skipHeader: true
  headers:
    Authorization: "Bearer {{$processEnvironment.AUTH_TOKEN}}"

scenarios:
  - name: "Non-Success API Responses"
    flow:
      # Invalid GET request with incorrect URL
      - get:
          url: "/rest/countrie"
          headers:
            Authorization: "Bearer {{$processEnvironment.AUTH_TOKEN}}"
          expect:
            - statusCode: 404
        think: 1

      # GET request without authorization token
      - get:
          url: "/rest/countries"
          expect:
            - statusCode: 401
        think: 1

      # GET request with incorrect authorization token
      - get:
          url: "/rest/countries"
          headers:
            Authorization: "Bearer wrong_token"
          expect:
            - statusCode: 403
        think: 1

      # GET request with valid authorization but non-existent country
      - get:
          url: "/rest/countries/{{ countryName }}"
          headers:
            Authorization: "Bearer {{$processEnvironment.AUTH_TOKEN}}"
          expect:
            - statusCode: 404
        think: 1
